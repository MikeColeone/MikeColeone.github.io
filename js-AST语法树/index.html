<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Keep Team">
    
    <title>
        
        Keep Theme
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Keep Theme","author":"Keep Team","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"home":"/","archives":"/archives"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":null,"category":false,"tag":false,"post_datetime":"updated"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null,"icon":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":false,"number":false,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":false,"preload":false},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.36"},"waline":{"server_url":null,"reaction":false,"version":"3.2.1"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.2.3"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original post title","author":"Original post author","link":"Original post link"}
  </script>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="site-name border-box" href="/">
               Keep Theme
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                HOME
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                ARCHIVES
                                
                            </a>
                            
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                            HOME
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                            ARCHIVES
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Keep Team</span>
                                
                                    <span class="author-badge">Lv5</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2025-09-10 02:43:59</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Sat May 24 2025 22:11:31 GMT+0800">2025-05-24 22:11:31</span>
            </span>
        

        

        

        
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <p>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼ŒAbstract Syntax Treeï¼‰æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­<strong>æºä»£ç çš„ä¸€ç§æ ‘çŠ¶ç»“æ„è¡¨ç¤º</strong>ï¼Œå®ƒè¡¨è¾¾äº†ä»£ç çš„<strong>è¯­æ³•ç»“æ„å’Œé€»è¾‘ç»“æ„</strong>ï¼Œä½†ä¸åŒ…å«ä¸€äº›å…·ä½“çš„è¯­æ³•ç»†èŠ‚ï¼ˆå¦‚åˆ†å·ã€æ‹¬å·ç­‰ï¼‰ï¼Œå› æ­¤å«â€œ<strong>æŠ½è±¡</strong>â€è¯­æ³•æ ‘ã€‚</p>
<hr>
<h2 id="âœ…-ä¸€ã€ä»€ä¹ˆæ˜¯ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Ÿ"><a href="#âœ…-ä¸€ã€ä»€ä¹ˆæ˜¯ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Ÿ" class="headerlink" title="âœ… ä¸€ã€ä»€ä¹ˆæ˜¯ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Ÿ"></a>âœ… ä¸€ã€ä»€ä¹ˆæ˜¯ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Ÿ</h2><p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>ASTæ˜¯ç¼–ç¨‹è¯­è¨€å°†ä»£ç è½¬åŒ–æˆæœºå™¨èƒ½ç†è§£å’Œå¤„ç†çš„â€œç»“æ„åŒ–æ•°æ®â€çš„è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸­é—´è¡¨ç¤ºã€‚</strong></p>
<p>åœ¨ç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨ä¸­ï¼Œæºä»£ç ä¼šç»å†å¦‚ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><p><strong>è¯æ³•åˆ†æ</strong>ï¼šå°†ä»£ç åˆ†è§£æˆä¸€ç³»åˆ—â€œå•è¯â€ï¼ˆtokenï¼‰ï¼Œæ¯”å¦‚å…³é”®å­—ã€å˜é‡åã€ç¬¦å·ç­‰ã€‚</p>
</li>
<li><p><strong>è¯­æ³•åˆ†æ</strong>ï¼šæ ¹æ®è¯­è¨€çš„è¯­æ³•è§„åˆ™ï¼ŒæŠŠè¿™äº›è¯è¯­ï¼ˆtokenï¼‰ç»„ç»‡æˆâ€œè¯­æ³•ç»“æ„â€â€”â€”ä¹Ÿå°±æ˜¯ASTã€‚</p>
</li>
<li><p><strong>è¯­ä¹‰åˆ†æ &#x2F; ä¸­é—´ä»£ç ç”Ÿæˆ &#x2F; ä»£ç ä¼˜åŒ–ç­‰</strong></p>
</li>
</ol>
<h3 id="ğŸŒ³-ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ğŸŒ³-ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ğŸŒ³ ä¸¾ä¸ªä¾‹å­ï¼š"></a>ğŸŒ³ ä¸¾ä¸ªä¾‹å­ï¼š</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">2</span> + <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>å®ƒçš„ASTï¼ˆç”¨æ ‘çŠ¶ç»“æ„ç®€åŒ–è¡¨ç¤ºï¼‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">VariableDeclaration</span><br><span class="line"> â””â”€ VariableDeclarator</span><br><span class="line">     â”œâ”€ Identifier (x)</span><br><span class="line">     â””â”€ BinaryExpression (+)</span><br><span class="line">         â”œâ”€ Literal (2)</span><br><span class="line">         â””â”€ Literal (3)</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒASTä¸ä¼šå…³å¿ƒæ˜¯å¦å†™äº†åˆ†å·ã€æ˜¯å¦æ¢è¡Œï¼Œè€Œæ˜¯ç›´æ¥æŠ“ä½äº†è¿™æ®µä»£ç çš„<strong>æœ¬è´¨ç»“æ„ï¼šå®šä¹‰äº†ä¸€ä¸ªå˜é‡ xï¼Œå…¶å€¼æ˜¯ 2 + 3</strong>ã€‚</p>
<hr>
<h2 id="âœ…-äºŒã€AST-çš„ç»“æ„ç‰¹ç‚¹"><a href="#âœ…-äºŒã€AST-çš„ç»“æ„ç‰¹ç‚¹" class="headerlink" title="âœ… äºŒã€AST çš„ç»“æ„ç‰¹ç‚¹"></a>âœ… äºŒã€AST çš„ç»“æ„ç‰¹ç‚¹</h2><ul>
<li><p><strong>èŠ‚ç‚¹ï¼ˆNodeï¼‰</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä»£ç ä¸­çš„ä¸€ç§ç»“æ„ï¼Œæ¯”å¦‚å‡½æ•°ã€å˜é‡ã€è¡¨è¾¾å¼ç­‰ã€‚</p>
</li>
<li><p><strong>ç±»å‹ï¼ˆtypeï¼‰</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ª<code>type</code>å­—æ®µï¼Œæ¯”å¦‚æ˜¯<code>BinaryExpression</code>ã€<code>Identifier</code>ã€<code>FunctionDeclaration</code>ã€‚</p>
</li>
<li><p><strong>å­èŠ‚ç‚¹ï¼ˆchildrenï¼‰</strong>ï¼šèŠ‚ç‚¹å¯èƒ½æœ‰å­èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸€ä¸ªå‡½æ•°å£°æ˜æœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä½“ç­‰ã€‚</p>
</li>
</ul>
<hr>
<h2 id="âœ…-ä¸‰ã€AST-çš„å®é™…åº”ç”¨åœºæ™¯"><a href="#âœ…-ä¸‰ã€AST-çš„å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="âœ… ä¸‰ã€AST çš„å®é™…åº”ç”¨åœºæ™¯"></a>âœ… ä¸‰ã€AST çš„å®é™…åº”ç”¨åœºæ™¯</h2><p>AST ä¸åªæ˜¯ç¼–è¯‘å™¨çš„ç©å…·ï¼Œå®ƒåœ¨<strong>å¾ˆå¤šå¼€å‘å·¥å…·å’Œæ¡†æ¶ä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨</strong>ï¼š</p>
<h3 id="1-âœ…-ä»£ç åˆ†æå·¥å…·ï¼ˆå¦‚-ESLintï¼‰"><a href="#1-âœ…-ä»£ç åˆ†æå·¥å…·ï¼ˆå¦‚-ESLintï¼‰" class="headerlink" title="1. âœ… ä»£ç åˆ†æå·¥å…·ï¼ˆå¦‚ ESLintï¼‰"></a>1. âœ… ä»£ç åˆ†æå·¥å…·ï¼ˆå¦‚ ESLintï¼‰</h3><ul>
<li><p><strong>Lint å·¥å…·</strong>é€šè¿‡åˆ†æ AST æ¥æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚</p>
</li>
<li><p>ä¾‹ï¼šæ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡ã€æ˜¯å¦ä½¿ç”¨äº†ä¸æ¨èçš„è¯­æ³•ã€‚</p>
</li>
</ul>
<h3 id="2-âœ…-ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚-Prettierï¼‰"><a href="#2-âœ…-ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚-Prettierï¼‰" class="headerlink" title="2. âœ… ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚ Prettierï¼‰"></a>2. âœ… ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆå¦‚ Prettierï¼‰</h3><ul>
<li><p>è‡ªåŠ¨æ’ç‰ˆä»£ç çš„ç»“æ„å’Œé£æ ¼ï¼Œä½†ä¸æ”¹å˜å«ä¹‰ã€‚</p>
</li>
<li><p>å®ƒä¼šå°†ä»£ç è§£æä¸º ASTï¼Œå†æŒ‰ç»Ÿä¸€è§„åˆ™â€œæ‰“å°â€æˆæ¼‚äº®çš„ä»£ç æ ¼å¼ã€‚</p>
</li>
</ul>
<h3 id="3-âœ…-Babelï¼ˆJavaScript-ç¼–è¯‘å™¨ï¼‰"><a href="#3-âœ…-Babelï¼ˆJavaScript-ç¼–è¯‘å™¨ï¼‰" class="headerlink" title="3. âœ… Babelï¼ˆJavaScript ç¼–è¯‘å™¨ï¼‰"></a>3. âœ… Babelï¼ˆJavaScript ç¼–è¯‘å™¨ï¼‰</h3><ul>
<li><p>æŠŠæ–°çš„ JavaScript è¯­æ³•ï¼ˆES6+ï¼‰è½¬æ¢ä¸ºå…¼å®¹æ—§æµè§ˆå™¨çš„ä»£ç ã€‚</p>
</li>
<li><p>å·¥ä½œæµç¨‹æ˜¯ï¼š<strong>ä»£ç  â†’ AST â†’ ä¿®æ”¹ AST â†’ é‡æ–°ç”Ÿæˆä»£ç </strong>ã€‚</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">square</span> = x =&gt; x * x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Babelè½¬æ¢ä¸º</span></span><br><span class="line"><span class="keyword">var</span> square = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè½¬æ¢èƒŒåå°±æ˜¯é€šè¿‡å¯¹ AST çš„ä¿®æ”¹å®ç°çš„ã€‚</p>
<h3 id="4-âœ…-è‡ªåŠ¨é‡æ„-ä»£ç ç”Ÿæˆ"><a href="#4-âœ…-è‡ªåŠ¨é‡æ„-ä»£ç ç”Ÿæˆ" class="headerlink" title="4. âœ… è‡ªåŠ¨é‡æ„ &#x2F; ä»£ç ç”Ÿæˆ"></a>4. âœ… è‡ªåŠ¨é‡æ„ &#x2F; ä»£ç ç”Ÿæˆ</h3><ul>
<li><p>æ¯”å¦‚ä½ å¯ä»¥å†™ä¸€ä¸ªè„šæœ¬ï¼Œéå† ASTï¼Œè‡ªåŠ¨æŠŠæ‰€æœ‰çš„ <code>var</code> å˜é‡å£°æ˜æ”¹ä¸º <code>let</code>ã€‚</p>
</li>
<li><p>ä¹Ÿå¯ä»¥ç”¨ AST æ¥ç”Ÿæˆä»£ç ç‰‡æ®µï¼Œæ¯”å¦‚è‡ªåŠ¨æ’å…¥æ—¥å¿—è¯­å¥ã€åŒ…è£¹å‡½æ•°è°ƒç”¨ç­‰ã€‚</p>
</li>
</ul>
<h3 id="5-âœ…-å‰ç«¯æ¡†æ¶æ„å»ºå·¥å…·ï¼ˆå¦‚-Webpackã€Rollupï¼‰"><a href="#5-âœ…-å‰ç«¯æ¡†æ¶æ„å»ºå·¥å…·ï¼ˆå¦‚-Webpackã€Rollupï¼‰" class="headerlink" title="5. âœ… å‰ç«¯æ¡†æ¶æ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackã€Rollupï¼‰"></a>5. âœ… å‰ç«¯æ¡†æ¶æ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackã€Rollupï¼‰</h3><ul>
<li><p>åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­åˆ†ææ¨¡å—ä¾èµ–ã€å¤„ç† <code>import/export</code>ï¼Œè¿™äº›éƒ½æ¶‰åŠ AST åˆ†æã€‚</p>
</li>
<li><p>Tree-shakingï¼ˆå‰”é™¤æœªç”¨ä»£ç ï¼‰ä¹Ÿä¾èµ– AST åˆ¤æ–­å“ªäº›ä»£ç è¢«å¼•ç”¨äº†ã€‚</p>
</li>
</ul>
<h3 id="6-âœ…-å®‰å…¨æ£€æµ‹"><a href="#6-âœ…-å®‰å…¨æ£€æµ‹" class="headerlink" title="6. âœ… å®‰å…¨æ£€æµ‹"></a>6. âœ… å®‰å…¨æ£€æµ‹</h3><ul>
<li>é€šè¿‡ AST è¯†åˆ«ä¸€äº›å±é™©æ“ä½œï¼Œæ¯”å¦‚ <code>eval()</code>ã€è·¨åŸŸè®¿é—®ç­‰ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-å››ã€å¦‚ä½•å®é™…ä½¿ç”¨-ASTï¼Ÿ"><a href="#âœ…-å››ã€å¦‚ä½•å®é™…ä½¿ç”¨-ASTï¼Ÿ" class="headerlink" title="âœ… å››ã€å¦‚ä½•å®é™…ä½¿ç”¨ ASTï¼Ÿ"></a>âœ… å››ã€å¦‚ä½•å®é™…ä½¿ç”¨ ASTï¼Ÿ</h2><p>ä»¥ JavaScript ä¸ºä¾‹ï¼Œå¸¸ç”¨çš„åº“æœ‰ï¼š</p>
<h3 id="ğŸ”§-1-acorn-espree-babel-parserï¼šå°†ä»£ç è½¬æˆ-AST"><a href="#ğŸ”§-1-acorn-espree-babel-parserï¼šå°†ä»£ç è½¬æˆ-AST" class="headerlink" title="ğŸ”§ 1. acorn &#x2F; espree &#x2F; @babel/parserï¼šå°†ä»£ç è½¬æˆ AST"></a>ğŸ”§ 1. <code>acorn</code> &#x2F; <code>espree</code> &#x2F; <code>@babel/parser</code>ï¼šå°†ä»£ç è½¬æˆ AST</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> acorn = <span class="built_in">require</span>(<span class="string">&quot;acorn&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> ast = acorn.<span class="title function_">parse</span>(<span class="string">&quot;let x = 1 + 2&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(ast, <span class="literal">null</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”§-2-estraverse-babel-traverseï¼šéå†å’Œä¿®æ”¹-AST"><a href="#ğŸ”§-2-estraverse-babel-traverseï¼šéå†å’Œä¿®æ”¹-AST" class="headerlink" title="ğŸ”§ 2. estraverse &#x2F; babel-traverseï¼šéå†å’Œä¿®æ”¹ AST"></a>ğŸ”§ 2. <code>estraverse</code> &#x2F; <code>babel-traverse</code>ï¼šéå†å’Œä¿®æ”¹ AST</h3><h3 id="ğŸ”§-3-escodegen-babel-generatorï¼šå°†-AST-å†ç”Ÿæˆä»£ç "><a href="#ğŸ”§-3-escodegen-babel-generatorï¼šå°†-AST-å†ç”Ÿæˆä»£ç " class="headerlink" title="ğŸ”§ 3. escodegen &#x2F; @babel/generatorï¼šå°† AST å†ç”Ÿæˆä»£ç "></a>ğŸ”§ 3. <code>escodegen</code> &#x2F; <code>@babel/generator</code>ï¼šå°† AST å†ç”Ÿæˆä»£ç </h3><hr>
<h2 id="âœ…-äº”ã€å°ç»“"><a href="#âœ…-äº”ã€å°ç»“" class="headerlink" title="âœ… äº”ã€å°ç»“"></a>âœ… äº”ã€å°ç»“</h2><table>
<thead>
<tr>
<th>æœ¯è¯­</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>AST</td>
<td>æŠ½è±¡è¯­æ³•æ ‘ï¼Œä»£ç ç»“æ„çš„æ ‘å½¢è¡¨ç¤º</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>åˆ†æã€ä¼˜åŒ–ã€è½¬æ¢ä»£ç </td>
</tr>
<tr>
<td>å…¸å‹åº”ç”¨</td>
<td>ESLintã€Prettierã€Babelã€Webpack</td>
</tr>
<tr>
<td>å¸¸ç”¨å·¥å…·</td>
<td>Babelã€Acornã€Esprimaã€Recast ç­‰</td>
</tr>
</tbody></table>
<hr>
<h2 id="å°†æ‰€æœ‰-let-æ”¹æˆ-constï¼Ÿ"><a href="#å°†æ‰€æœ‰-let-æ”¹æˆ-constï¼Ÿ" class="headerlink" title="å°†æ‰€æœ‰ let æ”¹æˆ constï¼Ÿ"></a>å°†æ‰€æœ‰ <code>let</code> æ”¹æˆ <code>const</code>ï¼Ÿ</h2><p>å¤ªå¥½äº†ï¼æˆ‘ä»¬æ¥å†™ä¸€ä¸ª<strong>å®æˆ˜ä¾‹å­</strong>ï¼šç”¨ JavaScript ä»£ç å’Œ AST å·¥å…·åº“ï¼Œå®ç°ä¸€ä¸ªåŠŸèƒ½ â€”â€” **æŠŠæ‰€æœ‰çš„ <code>let</code> å£°æ˜æ”¹æˆ <code>const</code>**ã€‚</p>
<hr>
<h2 id="âœ…-ç›®æ ‡"><a href="#âœ…-ç›®æ ‡" class="headerlink" title="âœ… ç›®æ ‡"></a>âœ… ç›®æ ‡</h2><p>è¾“å…¥ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span> + <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¸Œæœ›å˜æˆï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span> + <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ­¥éª¤è§£æ"><a href="#âœ…-æ­¥éª¤è§£æ" class="headerlink" title="âœ… æ­¥éª¤è§£æ"></a>âœ… æ­¥éª¤è§£æ</h2><p>æˆ‘ä»¬ä¼šç”¨ä¸‰ä¸ªæ ¸å¿ƒå·¥å…·åº“ï¼š</p>
<ol>
<li><p><code>@babel/parser</code>ï¼šæŠŠ JS æºç è§£ææˆ AST</p>
</li>
<li><p><code>@babel/traverse</code>ï¼šéå† ASTï¼Œæ‰¾åˆ°æˆ‘ä»¬è¦æ”¹çš„èŠ‚ç‚¹</p>
</li>
<li><p><code>@babel/generator</code>ï¼šæŠŠä¿®æ”¹åçš„ AST å†ç”Ÿæˆ JS ä»£ç </p>
</li>
</ol>
<hr>
<h2 id="âœ…-ç¤ºä¾‹ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰"><a href="#âœ…-ç¤ºä¾‹ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰" class="headerlink" title="âœ… ç¤ºä¾‹ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰"></a>âœ… ç¤ºä¾‹ä»£ç ï¼ˆå®Œæ•´å¯è¿è¡Œï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®‰è£…ä¾èµ–ï¼šnpm install @babel/parser @babel/traverse @babel/generator</span></span><br><span class="line"><span class="keyword">const</span> parser = <span class="built_in">require</span>(<span class="string">&#x27;@babel/parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> traverse = <span class="built_in">require</span>(<span class="string">&#x27;@babel/traverse&#x27;</span>).<span class="property">default</span>;</span><br><span class="line"><span class="keyword">const</span> generator = <span class="built_in">require</span>(<span class="string">&#x27;@babel/generator&#x27;</span>).<span class="property">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å…¥ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let a = 1;</span></span><br><span class="line"><span class="string">let b = 2 + 3;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. è§£æä»£ç æˆ AST</span></span><br><span class="line"><span class="keyword">const</span> ast = parser.<span class="title function_">parse</span>(code, &#123;</span><br><span class="line">  <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;jsx&#x27;</span>],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. éå† ASTï¼Œä¿®æ”¹ let -&gt; const</span></span><br><span class="line"><span class="title function_">traverse</span>(ast, &#123;</span><br><span class="line">  <span class="title class_">VariableDeclaration</span>(path) &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.<span class="property">node</span>.<span class="property">kind</span> === <span class="string">&#x27;let&#x27;</span>) &#123;</span><br><span class="line">      path.<span class="property">node</span>.<span class="property">kind</span> = <span class="string">&#x27;const&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æŠŠä¿®æ”¹åçš„ AST è½¬æ¢å›ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> output = <span class="title function_">generator</span>(ast).<span class="property">code</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;âœ… ä¿®æ”¹åçš„ä»£ç ï¼š\n&#x27;</span>, output);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-è¾“å‡ºç»“æœ"><a href="#âœ…-è¾“å‡ºç»“æœ" class="headerlink" title="âœ… è¾“å‡ºç»“æœ"></a>âœ… è¾“å‡ºç»“æœ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span> + <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>å®Œç¾ï¼</p>
<hr>
<h2 id="âœ…-å»¶ä¼¸ï¼ˆæ›´å¤æ‚çš„ä¿®æ”¹ï¼‰"><a href="#âœ…-å»¶ä¼¸ï¼ˆæ›´å¤æ‚çš„ä¿®æ”¹ï¼‰" class="headerlink" title="âœ… å»¶ä¼¸ï¼ˆæ›´å¤æ‚çš„ä¿®æ”¹ï¼‰"></a>âœ… å»¶ä¼¸ï¼ˆæ›´å¤æ‚çš„ä¿®æ”¹ï¼‰</h2><p>ä½ å¯ä»¥ç»§ç»­ç”¨è¿™ç§æ–¹å¼åšæ›´å¤šæ™ºèƒ½å¤„ç†ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><p>æ›¿æ¢å‡½æ•°å</p>
</li>
<li><p>ç»™å‡½æ•°è‡ªåŠ¨åŠ ä¸Š <code>console.log</code> æ—¥å¿—</p>
</li>
<li><p>è‡ªåŠ¨åˆ é™¤æ²¡ç”¨çš„å˜é‡</p>
</li>
<li><p>è¯†åˆ«å±é™©ç”¨æ³•ï¼ˆå¦‚ <code>eval()</code>ï¼‰</p>
</li>
</ul>
<hr>
<h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… æ€»ç»“</h2><table>
<thead>
<tr>
<th>æ­¥éª¤</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td><code>parser</code></td>
<td>æºç  âœ AST</td>
</tr>
<tr>
<td><code>traverse</code></td>
<td>éå†ä¿®æ”¹ AST ä¸­çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td><code>generator</code></td>
<td>AST âœ æ–°æºç </td>
</tr>
</tbody></table>
<hr>
<h2 id="åªæ”¹ä¸€éƒ¨åˆ†-letï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼çš„ï¼‰ä¸º-constâ€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸¦ä½ ç»§ç»­è¿›é˜¶å†™åˆ†æåˆ¤æ–­é€»è¾‘ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ"><a href="#åªæ”¹ä¸€éƒ¨åˆ†-letï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼çš„ï¼‰ä¸º-constâ€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸¦ä½ ç»§ç»­è¿›é˜¶å†™åˆ†æåˆ¤æ–­é€»è¾‘ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ" class="headerlink" title="åªæ”¹ä¸€éƒ¨åˆ† letï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼çš„ï¼‰ä¸º constâ€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸¦ä½ ç»§ç»­è¿›é˜¶å†™åˆ†æåˆ¤æ–­é€»è¾‘ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ"></a>åªæ”¹ä¸€éƒ¨åˆ† letï¼ˆä¸èƒ½é‡æ–°èµ‹å€¼çš„ï¼‰ä¸º constâ€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸¦ä½ ç»§ç»­è¿›é˜¶å†™åˆ†æåˆ¤æ–­é€»è¾‘ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ</h2><p>å¾ˆå¥½ï¼Œæˆ‘ä»¬ç°åœ¨æ¥åšä¸€ä¸ªæ›´â€œæ™ºèƒ½â€çš„ç‰ˆæœ¬ï¼š<br><strong>åªæœ‰åœ¨å˜é‡æ²¡æœ‰è¢«é‡æ–°èµ‹å€¼ï¼ˆå³â€œä¸å¯å˜â€ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ‰æŠŠ <code>let</code> æ”¹æˆ <code>const</code>ã€‚</strong></p>
<hr>
<h2 id="âœ…-ç›®æ ‡ï¼ˆæ›´æ™ºèƒ½çš„è½¬æ¢ï¼‰"><a href="#âœ…-ç›®æ ‡ï¼ˆæ›´æ™ºèƒ½çš„è½¬æ¢ï¼‰" class="headerlink" title="âœ… ç›®æ ‡ï¼ˆæ›´æ™ºèƒ½çš„è½¬æ¢ï¼‰"></a>âœ… ç›®æ ‡ï¼ˆæ›´æ™ºèƒ½çš„è½¬æ¢ï¼‰</h2><p>è¾“å…¥ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">b = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>æœŸæœ›è¾“å‡ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;  <span class="comment">// æ²¡è¢«æ”¹è¿‡ï¼Œå¯ä»¥å˜æˆ const</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;    <span class="comment">// è¢«é‡æ–°èµ‹å€¼äº†ï¼Œä¿æŒ let</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">5</span>;  <span class="comment">// æ²¡è¢«æ”¹è¿‡ï¼Œå¯ä»¥å˜æˆ const</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ€è·¯"><a href="#âœ…-æ€è·¯" class="headerlink" title="âœ… æ€è·¯"></a>âœ… æ€è·¯</h2><p>æˆ‘ä»¬è¦åˆ¤æ–­å˜é‡æ˜¯å¦è¢«â€œé‡æ–°èµ‹å€¼â€ï¼ˆreassignedï¼‰ã€‚ä¸ºæ­¤ï¼š</p>
<ol>
<li><p>åˆ©ç”¨ <code>@babel/traverse</code> çš„ä½œç”¨åŸŸç³»ç»Ÿï¼Œè¯†åˆ«å˜é‡çš„ç»‘å®šï¼ˆbindingï¼‰</p>
</li>
<li><p>æ£€æŸ¥æ¯ä¸ªå˜é‡çš„ç»‘å®šæ˜¯å¦è¢« <code>reassigned</code> è¿‡</p>
</li>
<li><p>å¦‚æœæ²¡æœ‰ï¼Œå°±æŠŠ <code>let</code> æ”¹æˆ <code>const</code></p>
</li>
</ol>
<hr>
<h2 id="âœ…-ä»£ç å®ç°"><a href="#âœ…-ä»£ç å®ç°" class="headerlink" title="âœ… ä»£ç å®ç°"></a>âœ… ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parser = <span class="built_in">require</span>(<span class="string">&#x27;@babel/parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> traverse = <span class="built_in">require</span>(<span class="string">&#x27;@babel/traverse&#x27;</span>).<span class="property">default</span>;</span><br><span class="line"><span class="keyword">const</span> generator = <span class="built_in">require</span>(<span class="string">&#x27;@babel/generator&#x27;</span>).<span class="property">default</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å…¥ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let a = 1;</span></span><br><span class="line"><span class="string">let b = 2;</span></span><br><span class="line"><span class="string">b = 3;</span></span><br><span class="line"><span class="string">let c = 5;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. è§£æä¸º AST</span></span><br><span class="line"><span class="keyword">const</span> ast = parser.<span class="title function_">parse</span>(code, &#123;</span><br><span class="line">  <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. éå† ASTï¼Œåˆ†æå˜é‡ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="title function_">traverse</span>(ast, &#123;</span><br><span class="line">  <span class="title class_">VariableDeclaration</span>(path) &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.<span class="property">node</span>.<span class="property">kind</span> === <span class="string">&#x27;let&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> allConst = path.<span class="property">node</span>.<span class="property">declarations</span>.<span class="title function_">every</span>(<span class="function">(<span class="params">decl</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> name = decl.<span class="property">id</span>.<span class="property">name</span>;</span><br><span class="line">        <span class="keyword">const</span> binding = path.<span class="property">scope</span>.<span class="title function_">getBinding</span>(name);</span><br><span class="line">        <span class="keyword">return</span> binding &amp;&amp; !binding.<span class="property">constantViolations</span>.<span class="property">length</span>;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (allConst) &#123;</span><br><span class="line">        path.<span class="property">node</span>.<span class="property">kind</span> = <span class="string">&#x27;const&#x27;</span>; <span class="comment">// å®‰å…¨è½¬æ¢</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. è¾“å‡ºä¿®æ”¹åçš„ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> output = <span class="title function_">generator</span>(ast).<span class="property">code</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;âœ… è¾“å‡ºä»£ç ï¼š\n&#x27;</span>, output);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-è¾“å‡ºç»“æœ-1"><a href="#âœ…-è¾“å‡ºç»“æœ-1" class="headerlink" title="âœ… è¾“å‡ºç»“æœ"></a>âœ… è¾“å‡ºç»“æœ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">b = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>æ²¡é—®é¢˜ï¼æˆ‘ä»¬åªæŠŠçœŸæ­£æ²¡æœ‰â€œè¢«é‡æ–°èµ‹å€¼â€çš„å˜é‡ä» <code>let</code> æ”¹æˆäº† <code>const</code>ã€‚</p>
<hr>
<h2 id="âœ…-å°çŸ¥è¯†ï¼šconstantViolations"><a href="#âœ…-å°çŸ¥è¯†ï¼šconstantViolations" class="headerlink" title="âœ… å°çŸ¥è¯†ï¼šconstantViolations"></a>âœ… å°çŸ¥è¯†ï¼š<code>constantViolations</code></h2><p>è¿™æ˜¯ Babel çš„æœ¯è¯­ï¼Œç”¨æ¥è¡¨ç¤º<strong>æŸä¸ªå˜é‡çš„â€œå¸¸é‡çº¦æŸâ€æ˜¯å¦è¢«ç ´åäº†</strong>ã€‚</p>
<ul>
<li><p>å¦‚æœä½ å†™äº† <code>b = 3</code>ï¼Œå°±ä¼šè®°å½•åœ¨ <code>constantViolations</code> ä¸­ã€‚</p>
</li>
<li><p>æ‰€ä»¥ <code>binding.constantViolations.length &gt; 0</code>ï¼Œè¯´æ˜è¯¥å˜é‡â€œå˜åŠ¨â€äº†ã€‚</p>
</li>
</ul>
<hr>
<h2 id="âœ…-ä½ å¯ä»¥ç»§ç»­æ‹“å±•çš„æ–¹å‘"><a href="#âœ…-ä½ å¯ä»¥ç»§ç»­æ‹“å±•çš„æ–¹å‘" class="headerlink" title="âœ… ä½ å¯ä»¥ç»§ç»­æ‹“å±•çš„æ–¹å‘"></a>âœ… ä½ å¯ä»¥ç»§ç»­æ‹“å±•çš„æ–¹å‘</h2><ul>
<li><p>âœ… æ›¿æ¢å˜é‡åï¼ˆå˜é‡ç»Ÿä¸€é‡å‘½åï¼‰</p>
</li>
<li><p>âœ… ç»™å‡½æ•°æˆ–æ–¹æ³•åŠ æ—¥å¿—ï¼ˆæ¯”å¦‚æ‰“å°å‚æ•°ï¼‰</p>
</li>
<li><p>âœ… åˆ†æå‡½æ•°æ˜¯å¦æ˜¯çº¯å‡½æ•°</p>
</li>
<li><p>âœ… è‡ªåŠ¨æ’å…¥ç±»å‹æ³¨é‡Šï¼ˆTypeScriptï¼‰</p>
</li>
<li><p>âœ… æ‰¹é‡æ”¹ API å†™æ³•ï¼ˆæ¯”å¦‚ React ä» <code>componentWillMount</code> æ”¹ä¸º <code>useEffect</code>ï¼‰</p>
</li>
</ul>
<hr>
<p>âœ… <strong>æ˜¯çš„ï¼Œä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼AST åœ¨å¤§è§„æ¨¡ä»£ç é‡æ„ä¸­éå¸¸æœ‰ç”¨ï¼Œè€Œä¸”æ˜¯å¾ˆå¤šå¤§å‹å·¥å…·å’Œå›¢é˜Ÿçš„æ ¸å¿ƒæŠ€æœ¯æ‰‹æ®µã€‚</strong></p>
<hr>
<h2 id="âœ…-ä¸ºä»€ä¹ˆ-AST-å¯¹é‡æ„ç‰¹åˆ«é€‚åˆï¼Ÿ"><a href="#âœ…-ä¸ºä»€ä¹ˆ-AST-å¯¹é‡æ„ç‰¹åˆ«é€‚åˆï¼Ÿ" class="headerlink" title="âœ… ä¸ºä»€ä¹ˆ AST å¯¹é‡æ„ç‰¹åˆ«é€‚åˆï¼Ÿ"></a>âœ… ä¸ºä»€ä¹ˆ AST å¯¹é‡æ„ç‰¹åˆ«é€‚åˆï¼Ÿ</h2><h3 id="1-ç»“æ„åŒ–æ“ä½œï¼Œä¸é â€œæ–‡æœ¬æ›¿æ¢â€"><a href="#1-ç»“æ„åŒ–æ“ä½œï¼Œä¸é â€œæ–‡æœ¬æ›¿æ¢â€" class="headerlink" title="1. ç»“æ„åŒ–æ“ä½œï¼Œä¸é â€œæ–‡æœ¬æ›¿æ¢â€"></a>1. <strong>ç»“æ„åŒ–æ“ä½œï¼Œä¸é â€œæ–‡æœ¬æ›¿æ¢â€</strong></h3><p>ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æœç´¢ + æ›¿æ¢æœ‰å¾ˆå¤šé—®é¢˜ï¼š</p>
<ul>
<li><p>å®¹æ˜“è¯¯æ”¹ï¼ˆæ¯”å¦‚å˜é‡åå‡ºç°åœ¨æ³¨é‡Šã€å­—ç¬¦ä¸²é‡Œï¼‰</p>
</li>
<li><p>æ— æ³•å‡†ç¡®å¤„ç†ä½œç”¨åŸŸã€ç±»å‹ã€å¯¼å…¥å…³ç³»</p>
</li>
</ul>
<p>è€Œ AST æ˜¯â€œ<strong>è¯­æ³•å±‚é¢</strong>â€çš„ç»“æ„è¡¨ç¤ºï¼Œå¯ä»¥ç²¾ç¡®å®šä½ï¼š</p>
<ul>
<li><p>æŸä¸ªå˜é‡çš„å®šä¹‰å’Œä½¿ç”¨</p>
</li>
<li><p>æŸä¸ªå‡½æ•°çš„å‚æ•°ã€è¿”å›å€¼</p>
</li>
<li><p>æŸä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»</p>
</li>
</ul>
<p>è¿™å°±åƒä½ åœ¨ä¿®æ”¹â€œç¨‹åºé€»è¾‘â€è€Œä¸æ˜¯â€œæ–‡æœ¬å†…å®¹â€ã€‚</p>
<hr>
<h2 id="âœ…-å®é™…æ¡ˆä¾‹ï¼šå›¢é˜Ÿå¦‚ä½•ç”¨-AST-è‡ªåŠ¨é‡æ„"><a href="#âœ…-å®é™…æ¡ˆä¾‹ï¼šå›¢é˜Ÿå¦‚ä½•ç”¨-AST-è‡ªåŠ¨é‡æ„" class="headerlink" title="âœ… å®é™…æ¡ˆä¾‹ï¼šå›¢é˜Ÿå¦‚ä½•ç”¨ AST è‡ªåŠ¨é‡æ„"></a>âœ… å®é™…æ¡ˆä¾‹ï¼šå›¢é˜Ÿå¦‚ä½•ç”¨ AST è‡ªåŠ¨é‡æ„</h2><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>é‡æ„ç›®æ ‡</th>
<th>AST å¦‚ä½•å‘æŒ¥ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>å‰ç«¯ç»„ä»¶å‡çº§</td>
<td>æŠŠæ—§ç»„ä»¶ APIï¼ˆpropsï¼‰æ‰¹é‡æ¢æˆæ–°ç‰ˆæœ¬</td>
<td>ç²¾ç¡®æŸ¥æ‰¾ JSX ä¸­çš„å±æ€§åï¼Œæ›¿æ¢å¹¶ä¿ç•™æ³¨é‡Š</td>
</tr>
<tr>
<td>å‡½æ•°è¿ç§»</td>
<td>è€åº“ä¸­çš„ <code>utils.doX()</code> æ”¹æˆæ–°åº“çš„ <code>newUtils.doX()</code></td>
<td>æ£€æŸ¥å¯¼å…¥è¯­å¥ + å‡½æ•°è°ƒç”¨ä½ç½®ï¼Œè‡ªåŠ¨ä¿®æ”¹</td>
</tr>
<tr>
<td>æ¨¡å—æ‹†åˆ†</td>
<td>æ‹†æˆå¤šä¸ªæ–‡ä»¶ï¼Œæ›´æ–°å¼•ç”¨è·¯å¾„</td>
<td>æ‰¾åˆ° <code>import</code> å’Œ <code>require</code> è·¯å¾„ï¼Œç»Ÿä¸€æ”¹è·¯å¾„</td>
</tr>
<tr>
<td>JS âœ TS</td>
<td>ç»™å˜é‡ã€å‡½æ•°è‡ªåŠ¨åŠ ä¸Šç±»å‹æ³¨è§£</td>
<td>åˆ©ç”¨ AST è·å–ä¸Šä¸‹æ–‡ï¼Œæ’å…¥åˆé€‚çš„ç±»å‹èŠ‚ç‚¹</td>
</tr>
<tr>
<td>console æ¸…ç†</td>
<td>æ¸…é™¤æ‰€æœ‰ <code>console.log()</code> ä½†ä¿ç•™ <code>console.error()</code></td>
<td>ç”¨ AST åŒºåˆ†è°ƒç”¨å¯¹è±¡å’Œæ–¹æ³•åï¼Œç²¾å‡†å¤„ç†</td>
</tr>
</tbody></table>
<hr>
<h2 id="âœ…-å·¥å…·æ¨è"><a href="#âœ…-å·¥å…·æ¨è" class="headerlink" title="âœ… å·¥å…·æ¨è"></a>âœ… å·¥å…·æ¨è</h2><table>
<thead>
<tr>
<th>å·¥å…·å</th>
<th>åŠŸèƒ½</th>
<th>é€‚åˆç”¨ä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>jscodeshift</strong>ï¼ˆby Facebookï¼‰</td>
<td>åŸºäº AST çš„â€œä»£ç å˜æ¢è„šæœ¬â€å·¥å…·</td>
<td>æ‰¹é‡é‡æ„ React &#x2F; JS</td>
</tr>
<tr>
<td><strong>babel + traverse</strong></td>
<td>è‡ªå®šä¹‰ä¿®æ”¹ JS &#x2F; TS ä»£ç çš„ AST</td>
<td>ç²¾ç»†æ§åˆ¶ï¼ŒåŠŸèƒ½å¼ºå¤§</td>
</tr>
<tr>
<td><strong>ts-morph</strong>ï¼ˆåŸºäº TypeScript ASTï¼‰</td>
<td>æ“ä½œ TypeScript ä»£ç æœ€å¼ºå·¥å…·ä¹‹ä¸€</td>
<td>è‡ªåŠ¨ç±»å‹è¡¥å…¨ã€é‡æ„</td>
</tr>
<tr>
<td><strong>eslint + eslint rules</strong></td>
<td>æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜</td>
<td>è‡ªå®šä¹‰è§„åˆ™ã€æç¤ºæˆ–ä¿®å¤å»ºè®®</td>
</tr>
<tr>
<td><strong>codemod</strong></td>
<td>å¤šç§è¯­è¨€çš„é‡æ„å·¥å…·é›†</td>
<td>Python &#x2F; JS éƒ½å¯ç”¨</td>
</tr>
</tbody></table>
<hr>
<h2 id="âœ…-çœŸå®ä¼ä¸šåœºæ™¯ï¼ˆç®€è¿°ï¼‰"><a href="#âœ…-çœŸå®ä¼ä¸šåœºæ™¯ï¼ˆç®€è¿°ï¼‰" class="headerlink" title="âœ… çœŸå®ä¼ä¸šåœºæ™¯ï¼ˆç®€è¿°ï¼‰"></a>âœ… çœŸå®ä¼ä¸šåœºæ™¯ï¼ˆç®€è¿°ï¼‰</h2><h3 id="ğŸ¯-æ¡ˆä¾‹ï¼šReact-ç»„ä»¶åº“å‡çº§"><a href="#ğŸ¯-æ¡ˆä¾‹ï¼šReact-ç»„ä»¶åº“å‡çº§" class="headerlink" title="ğŸ¯ æ¡ˆä¾‹ï¼šReact ç»„ä»¶åº“å‡çº§"></a>ğŸ¯ æ¡ˆä¾‹ï¼šReact ç»„ä»¶åº“å‡çº§</h3><blockquote>
<p>æŸå…¬å¸å‡†å¤‡ä»æ—§ç»„ä»¶åº“ï¼ˆæ¯”å¦‚ antd v3ï¼‰å‡çº§åˆ°æ–°ç»„ä»¶åº“ï¼ˆæ¯”å¦‚ antd v4ï¼‰ï¼Œéœ€è¦æŠŠæ‰€æœ‰ <code>&lt;Button type=&quot;primary&quot;&gt;</code> æ”¹ä¸º <code>&lt;Button variant=&quot;solid&quot;&gt;</code></p>
</blockquote>
<p>ğŸ‘¨â€ğŸ’» äººå·¥æ”¹ï¼Ÿå‡ åƒå¤„ï¼Œä»£ä»·å·¨å¤§<br>âš™ï¸ ç”¨ ASTï¼š</p>
<ul>
<li><p>ç”¨ Babel è§£æé¡¹ç›®æ‰€æœ‰æºç </p>
</li>
<li><p>å®šä½æ‰€æœ‰ JSX å…ƒç´ ä¸­ <code>Button</code> çš„ <code>type=&quot;primary&quot;</code></p>
</li>
<li><p>æ›¿æ¢ä¸º <code>variant=&quot;solid&quot;</code>ï¼Œä¿ç•™æ³¨é‡Šã€é¡ºåºä¸ä¹±</p>
</li>
<li><p>ä¸€é”®ç”Ÿæˆé‡æ„åä»£ç </p>
</li>
</ul>
<hr>
<h2 id="âœ…-å°ç»“"><a href="#âœ…-å°ç»“" class="headerlink" title="âœ… å°ç»“"></a>âœ… å°ç»“</h2><blockquote>
<p><strong>AST æ˜¯â€œç»“æ„åŒ–ç¼–ç¨‹â€çš„æ ¸å¿ƒæ­¦å™¨ï¼Œå°¤å…¶é€‚åˆåšå¤§æ‰¹é‡ã€ç²¾å‡†ã€å¯é‡å¤çš„ä»£ç é‡æ„ã€‚</strong></p>
</blockquote>
<h3 id="å®ƒå¯ä»¥å¸®ä½ åšåˆ°ï¼š"><a href="#å®ƒå¯ä»¥å¸®ä½ åšåˆ°ï¼š" class="headerlink" title="å®ƒå¯ä»¥å¸®ä½ åšåˆ°ï¼š"></a>å®ƒå¯ä»¥å¸®ä½ åšåˆ°ï¼š</h3><ul>
<li><p>è‡ªåŠ¨åŒ–</p>
</li>
<li><p>é›¶è¯¯ä¼¤</p>
</li>
<li><p>å®‰å…¨ã€å¯æ§çš„ä»£ç å‡çº§</p>
</li>
</ul>
<hr>

                    
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/js-js%E5%8D%95%E7%BA%BF%E7%A8%8B/"
                                   title=""
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis"></span>
                                        <span class="post-nav-item">Prev posts</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/html-src-href/"
                                   title=""
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis"></span>
                                        <span class="post-nav-item">Next posts</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
        &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2025
        
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Keep Team</a>
        
    </div>

    <div class="theme-info info-item">
        Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
    </div>

    

    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    

    <!-- tablet toc -->
    
</main>





<!-- common js -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local search -->


<!-- lazyload -->


<div class="">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
