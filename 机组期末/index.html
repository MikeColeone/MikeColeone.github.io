<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Keep Team">
    
    <title>
        
            机组期末 |
        
        Keep Theme
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Keep Theme","author":"Keep Team","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"home":"/","archives":"/archives"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":null,"category":false,"tag":false,"post_datetime":"updated"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null,"icon":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":false,"number":false,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":false,"preload":false},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.36"},"waline":{"server_url":null,"reaction":false,"version":"3.2.1"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.2.3"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original post title","author":"Original post author","link":"Original post link"}
  </script>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="site-name border-box" href="/">
               Keep Theme
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                HOME
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                ARCHIVES
                                
                            </a>
                            
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                            HOME
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                            ARCHIVES
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        机组期末
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Keep Team</span>
                                
                                    <span class="author-badge">Lv4</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2024-12-05 22:02:19</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Thu Dec 05 2024 22:11:37 GMT+0800">2024-12-05 22:11:37</span>
            </span>
        

        

        

        
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <ul>
<li><p>中断处理过程描述，中断优先级，屏蔽字的设置</p>
<ul>
<li><h3 id="一、中断处理过程"><a href="#一、中断处理过程" class="headerlink" title="一、中断处理过程"></a>一、中断处理过程</h3><ol>
<li><strong>中断请求</strong><ul>
<li>当外部设备需要CPU处理时，会向CPU发出中断请求信号。例如，键盘输入一个字符，键盘控制器就会向CPU发送中断请求。</li>
</ul>
</li>
<li><strong>中断响应</strong><ul>
<li>CPU在执行完当前指令后，会检查是否有中断请求。如果有中断请求且中断允许标志（如中断允许触发器为1），CPU就会响应中断。</li>
<li>在响应中断时，硬件会自动完成一些操作：</li>
<li>将程序计数器（PC）的内容压栈，以保存断点，方便中断处理完后返回原程序继续执行。</li>
<li>关中断，防止在处理当前中断时又响应其他中断（有些情况可能允许中断嵌套，但初始响应时一般会先关中断）。</li>
<li>根据中断源形成中断服务程序入口地址并送入PC，从而转向中断服务程序。</li>
</ul>
</li>
<li><strong>中断服务</strong><ul>
<li>CPU执行中断服务程序，处理中断事件。例如，对于键盘输入的中断，中断服务程序会读取键盘输入的数据，并进行相应处理（如将字符存储到缓冲区等）。</li>
<li>在中断服务程序中，通常会保存相关寄存器的内容（如果这些寄存器在中断处理过程中会被修改），处理中断事件后再恢复这些寄存器的内容。</li>
</ul>
</li>
<li><strong>中断返回</strong><ul>
<li><p>中断服务程序执行完后，执行中断返回指令。</p>
</li>
<li><p>中断返回指令会将之前压栈保存的PC值弹出，恢复到PC中，从而使CPU返回到原程序断点处继续执行。</p>
<h3 id="二、中断优先级"><a href="#二、中断优先级" class="headerlink" title="二、中断优先级"></a>二、中断优先级</h3></li>
</ul>
</li>
<li><strong>概念</strong><ul>
<li>多个中断源同时发出中断请求时，CPU需要按照一定的优先级顺序来响应中断。优先级高的中断先被处理。</li>
<li>例如，在一个计算机系统中，电源故障中断的优先级通常高于键盘输入中断。因为电源故障需要立即处理，以防止数据丢失等严重后果，而键盘输入可以稍作等待。</li>
</ul>
</li>
<li><strong>实现方式</strong><ul>
<li><p><strong>硬件排队电路</strong>：</p>
</li>
<li><p>利用硬件电路来判断多个中断请求的优先级。例如，链式优先级排队电路，当多个中断请求同时到来时，优先级最高的中断源产生的中断请求信号会首先被传递到CPU。</p>
</li>
<li><p><strong>软件查询</strong>：</p>
</li>
<li><p>CPU通过软件查询中断源的方式来确定优先级。按照一定顺序查询各个中断源，先查询到的中断源优先级较高。这种方式灵活性较差，但硬件成本低。</p>
<h3 id="三、中断屏蔽字的设置"><a href="#三、中断屏蔽字的设置" class="headerlink" title="三、中断屏蔽字的设置"></a>三、中断屏蔽字的设置</h3></li>
</ul>
</li>
<li><strong>概念</strong><ul>
<li>中断屏蔽字用于控制中断的响应。每个中断源对应中断屏蔽字中的一位。</li>
<li>当某一位为0时，表示对应的中断源可以中断当前程序；当某一位为1时，表示对应的中断源被屏蔽，不能中断当前程序。</li>
</ul>
</li>
<li><strong>设置目的</strong><ul>
<li>实现中断优先级控制：</li>
<li>例如，有三个中断源A、B、C，其优先级为A &gt; B &gt; C。当CPU正在处理B中断时，如果A中断来了，由于A的优先级高，应该允许A中断B。但是如果C中断来了，由于C的优先级低，应该屏蔽C，不让C中断B。可以通过设置中断屏蔽字来实现这种优先级控制。</li>
<li>灵活控制中断处理：</li>
<li>在某些情况下，系统可能需要暂时屏蔽某些中断。比如在处理一个对时间要求非常严格的中断服务程序时，为了防止其他中断干扰，可以设置相应的中断屏蔽字来屏蔽不必要的中断。</li>
</ul>
</li>
<li><strong>设置方式</strong><ul>
<li>通常由程序员通过指令来设置中断屏蔽字。不同的计算机系统有不同的指令来实现对中断屏蔽字的操作。例如，在某些系统中，可以使用专门的“设置中断屏蔽字”指令，将需要屏蔽的中断源对应的位置1，不需要屏蔽的置0。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>定点运算，补码加法，原码乘法，浮点加减运算</p>
<ul>
<li><h3 id="一、定点运算"><a href="#一、定点运算" class="headerlink" title="一、定点运算"></a>一、定点运算</h3><ol>
<li><p><strong>定义</strong></p>
<ul>
<li>定点运算指的是在计算机中，小数点位置固定的数的运算。根据小数点位置的不同，定点数分为定点整数和定点小数。</li>
<li>定点整数：小数点固定在数的最右边，常用于表示纯整数。例如，8位二进制表示的定点整数范围（无符号）是0 - 255，有符号是 - 128 - 127。</li>
<li>定点小数：小数点固定在符号位之后，常用于表示纯小数。例如，8位二进制表示的定点小数范围（无符号）是0 - 1，有符号是 - 1 - (1 - 2⁻⁷)。</li>
</ul>
</li>
<li><p><strong>解题思路</strong></p>
<ul>
<li><p><strong>转换问题</strong>：如果题目给出十进制数，需将其转换为二进制的定点数格式。</p>
</li>
<li><p><strong>运算规则</strong>：</p>
</li>
<li><p>加法和减法：按位相加或相减，考虑进位和借位，与普通二进制加减法相同。</p>
</li>
<li><p>乘法：对于定点整数，可按照二进制乘法规则运算，然后根据结果判断是否溢出；对于定点小数，乘法运算结果小数点位置在符号位后，且位数可能需要调整。</p>
</li>
<li><p>除法：通过移位和减法操作实现，注意结果的范围和精度。</p>
<h3 id="二、补码加法"><a href="#二、补码加法" class="headerlink" title="二、补码加法"></a>二、补码加法</h3></li>
</ul>
</li>
<li><p><strong>定义</strong></p>
<ul>
<li>补码是一种计算机中对数字的编码方法，主要用于简化有符号数的加减法运算。正数的补码等于其原码，负数的补码是其原码除符号位外各位取反然后加1。</li>
<li>例如，8位二进制中，+5的补码是00000101， - 5的补码是11111011。</li>
</ul>
</li>
<li><p><strong>解题思路</strong></p>
<ul>
<li><p><strong>求补码</strong>：如果给出的是原码或十进制数，先将其转换为补码。</p>
</li>
<li><p><strong>加法运算</strong>：</p>
</li>
<li><p>直接将两个补码相加，包括符号位一起运算。</p>
</li>
<li><p>若结果的最高位（符号位）有进位，此进位舍去（因为在补码表示中，符号位参与运算，进位自然溢出）。</p>
</li>
<li><p>检查结果是否溢出：若两个正数相加结果为负，或两个负数相加结果为正，则发生溢出。</p>
<h3 id="三、原码乘法"><a href="#三、原码乘法" class="headerlink" title="三、原码乘法"></a>三、原码乘法</h3></li>
</ul>
</li>
<li><p><strong>定义</strong></p>
<ul>
<li>原码是一种简单的有符号数表示方法，最高位为符号位，其余位表示数值。原码乘法是按照手工乘法运算规则对原码进行乘法运算。</li>
<li>例如，+7的原码是00000111， - 7的原码是10000111。</li>
</ul>
</li>
<li><p><strong>解题思路</strong></p>
<ul>
<li><strong>确定符号</strong>：两数相乘，符号位单独处理，为两数符号位的异或结果（同号为正，异号为负）。</li>
<li><strong>数值运算</strong>：</li>
<li>将绝对值（原码的数值部分）按二进制乘法规则相乘。</li>
<li>例如，计算13×(-9)：</li>
<li>13的原码是01101， - 9的原码是11001。</li>
<li>符号位：0⊕1 &#x3D; 1（异或运算）。</li>
<li>数值部分：</li>
<li>1101</li>
<li>×1001</li>
</ul>
<hr>
<ul>
<li>1101</li>
<li>0000</li>
<li>0000</li>
<li>1101</li>
</ul>
<hr>
<ul>
<li><p>1110101</p>
</li>
<li><p>结果原码为11110101。</p>
<h3 id="四、浮点加减运算"><a href="#四、浮点加减运算" class="headerlink" title="四、浮点加减运算"></a>四、浮点加减运算</h3></li>
</ul>
</li>
<li><p><strong>定义</strong></p>
<ul>
<li>浮点数由阶码和尾数两部分组成，一般形式为$N &#x3D; M×2^E$，其中$M$是尾数，$E$是阶码。浮点加减运算需要先对阶，然后进行尾数加减，最后规格化结果。</li>
<li>例如，一个浮点数表示为$0.1101×2^{3}$，其中0.1101是尾数，3是阶码。</li>
</ul>
</li>
<li><p><strong>解题思路</strong></p>
<ul>
<li><strong>对阶</strong>：</li>
<li>比较两个浮点数的阶码，将阶码小的数的尾数右移，同时阶码增大，直到两数阶码相等。</li>
<li>例如，计算$0.1101×2^{3}+(- 0.1010)×2^{2}$：</li>
<li>对阶：将$(- 0.1010)×2^{2}$转换为$(- 0.0101)×2^{3}$。</li>
<li><strong>尾数加减</strong>：</li>
<li>对阶后，按定点加减法规则对尾数进行加减。</li>
<li>上例中，$0.1101+(- 0.0101)&#x3D;0.1000$。</li>
<li><strong>规格化</strong>：</li>
<li>检查结果尾数是否符合规格化要求（一般要求尾数最高位为1），若不符合则进行左规或右规操作，并相应调整阶码。</li>
<li>上例结果$0.1000×2^{3}$已经是规格化形式，无需再处理。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>指令系统寻址，指令格式的确定</p>
<ul>
<li><ol>
<li><strong>指令系统寻址</strong><ul>
<li><strong>定义</strong>：</li>
<li>寻址是指寻找操作数或指令地址的方式。指令系统寻址方式的多样性和有效性对计算机的性能和编程灵活性有重要影响。</li>
<li><strong>寻址方式分类及说明</strong>：</li>
<li><strong>立即寻址</strong>：</li>
<li>操作数直接包含在指令中。例如，指令“ADD R1, #5”（这里假设是一种简单的指令格式），其中#5就是立即数，这种寻址方式的优点是获取操作数速度快，不需要额外的访存操作来读取操作数，常用于给寄存器赋初值等操作。</li>
<li><strong>直接寻址</strong>：</li>
<li>指令中直接给出操作数的内存地址。例如，指令“LOAD R2, [1000H]”（假设为16位地址），表示将内存地址为1000H处的内容加载到R2寄存器中。它的优点是简单直观，缺点是地址空间有限，并且如果程序需要在不同的内存区域操作，需要修改指令中的地址部分。</li>
<li><strong>间接寻址</strong>：</li>
<li>指令中给出的是操作数地址的地址。例如，指令“MOV R3, @[2000H]”，这里2000H内存单元中存放的是真正操作数的地址，需要先访问2000H单元获取操作数地址，再访问操作数地址对应的单元获取操作数。这种方式增加了寻址的灵活性，可用于实现动态数据结构等，但访问速度相对较慢，因为需要两次访存。</li>
<li><strong>寄存器寻址</strong>：</li>
<li>操作数存放在寄存器中，指令中直接指定寄存器名来获取操作数。例如，“ADD R4, R5”，将R5寄存器中的内容与R4寄存器中的内容相加。这种方式的优点是速度快，因为寄存器在CPU内部，访问时间短，常用于频繁使用的操作数存储。</li>
<li><strong>寄存器间接寻址</strong>：</li>
<li>指令中指定的寄存器内容是操作数的地址。例如，“MOV R6, [R7]”，R7寄存器中的内容作为内存地址，将该地址对应的内存单元内容传送到R6寄存器。它结合了寄存器寻址和间接寻址的特点，既利用了寄存器访问速度快的优势，又能灵活地访问内存。</li>
<li><strong>相对寻址</strong>：</li>
<li>操作数的地址是通过程序计数器（PC）的值加上指令中给出的偏移量来确定的。例如，指令“JMP + 5”（这里假设相对跳转指令格式），如果当前PC值为100H，那么跳转后的目标地址为100H + 5 &#x3D; 105H。这种寻址方式常用于程序的分支和循环结构，使得程序在内存中的位置移动时，相对跳转指令不需要修改，增强了程序的可移植性。</li>
<li><strong>基址寻址</strong>：</li>
<li>操作数的地址由基址寄存器中的内容和指令中给出的偏移量相加得到。例如，有一个基址寄存器BR和指令“LOAD R8, [BR + 10H]”，将BR中的内容加上10H作为内存地址，把该地址处的内容加载到R8寄存器。基址寻址常用于多道程序设计环境，每个程序有自己的基址寄存器，可以方便地将程序和数据的地址空间映射到物理内存。</li>
<li><strong>变址寻址</strong>：</li>
<li>操作数地址等于变址寄存器的内容与指令中给出的偏移量之和。例如，指令“STORE R9, [IX + 20H]”（IX为变址寄存器），变址寄存器的内容加上20H作为存储R9寄存器内容的内存地址。变址寻址常用于数组处理，通过改变变址寄存器的值，可以方便地访问数组中的不同元素。</li>
</ul>
</li>
<li><strong>指令格式的确定</strong><ul>
<li><strong>设计原则</strong>：</li>
<li><strong>操作码字段设计</strong>：</li>
<li>操作码用于指定指令的操作类型，如算术运算、逻辑运算、数据传送等。操作码的长度决定了指令系统所能表示的操作种类。例如，若操作码长度为4位，则可以表示$2^4 &#x3D; 16$种不同的操作。在设计时，要根据指令系统的功能需求确定操作码长度。对于复杂的计算机系统，可能需要更多的操作码位来支持多种操作。同时，为了节省指令字长，可以采用扩展操作码技术，即对一些使用频率较低的操作使用较长的操作码，而对常用操作使用较短的操作码。</li>
<li><strong>地址码字段设计</strong>：</li>
<li>地址码用于指定操作数的地址或存放结果的地址。地址码的个数和长度取决于寻址方式和操作数的个数。例如，对于双操作数指令，如果采用寄存器寻址方式，可能每个操作数只需要3 - 4位来指定寄存器编号；如果采用直接寻址方式，可能需要16位或32位来指定内存地址。在确定地址码长度时，要考虑内存空间大小和寻址范围。如果需要支持多种寻址方式，可能需要一些标志位来区分不同的寻址方式，这些标志位也会占用指令字长。</li>
<li><strong>指令字长考虑因素</strong>：</li>
<li>指令字长是指一条指令中二进制代码的位数。它影响计算机的存储容量、取指令速度和指令系统的功能。较短的指令字长可以节省存储空间，但可能会限制指令的功能和寻址范围；较长的指令字长可以提供更丰富的功能和更大的寻址范围，但会占用更多的存储空间，并且取指令时间可能会更长。在设计指令格式时，要综合考虑计算机的性能要求、存储容量和应用场景来确定合适的指令字长。</li>
<li><strong>指令格式举例</strong>：</li>
<li>假设设计一个简单的指令格式，指令字长为16位。其中，高4位为操作码，用于表示16种不同的操作。剩下12位分为两个6位的字段，分别用于表示两个操作数的地址。如果采用寄存器寻址方式，6位可以表示$2^6 &#x3D; 64$个寄存器；如果采用直接寻址方式，6位可以表示$2^6 &#x3D; 64$个内存单元（假设内存空间较小）。在这种格式下，指令“ADD R1, R2”（假设ADD操作码为0001，R1和R2寄存器编号分别为01和10）的二进制指令格式可能是00010110（高4位是操作码0001，后6位是R1的编号01，最后6位是R2的编号10）。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>指令周期流程，指令流水参数计算；</p>
<ul>
<li><ol>
<li><strong>指令周期流程</strong><ul>
<li><strong>定义</strong>：指令周期是指从取指令、分析指令到执行指令所需的全部时间。它是CPU工作的基本时间单位，不同指令的指令周期可能不同。</li>
<li><strong>取指令阶段（Fetch）</strong>：</li>
<li>程序计数器（PC）将指令地址送往存储器地址寄存器（MAR）。</li>
<li>根据MAR中的地址，从存储器中读取指令，将指令送入存储器数据寄存器（MDR）。</li>
<li>然后将MDR中的指令送到指令寄存器（IR），同时PC内容自动增加，指向下一条指令地址（如果是顺序执行的话）。例如，在一个简单的8位计算机模型中，PC初始值为00000000，若指令长度为8位，读取一条指令后，PC会自动加1，变为00000001。</li>
<li><strong>指令译码阶段（Decode）</strong>：</li>
<li>IR中的指令操作码部分被送到指令译码器进行译码，以确定指令的操作类型，如加法、减法、数据传送等。</li>
<li>同时，根据指令的寻址方式，从IR和相关寄存器（如通用寄存器或地址寄存器）中获取操作数的地址信息。例如，对于一条寄存器间接寻址的加法指令“ADD R1, [R2]”，译码器会识别出操作码为加法，并且知道第一个操作数在R1寄存器，第二个操作数的地址在R2寄存器中。</li>
<li><strong>执行指令阶段（Execute）</strong>：</li>
<li>根据译码结果，控制单元（CU）发出一系列控制信号，使相应的功能部件（如算术逻辑单元ALU）执行指令规定的操作。</li>
<li>对于数据传送指令，会将数据从源地址传送到目标地址；对于算术运算指令，ALU会对操作数进行运算，将结果存放在指定的位置。例如，对于指令“ADD R3, R4”，ALU会将R3和R4中的内容相加，然后将结果存回R3（假设是这种存储结果的方式）。</li>
<li><strong>访存阶段（Memory Access）</strong>：</li>
<li>如果指令需要访问存储器，如读取操作数或存储结果，就会在这个阶段进行。</li>
<li>例如，对于指令“STORE R5, [1000H]”，在执行阶段计算出R5中的内容后，在访存阶段将R5的内容存储到内存地址为1000H的单元中。</li>
<li><strong>写回阶段（Write - Back）</strong>：</li>
<li>将执行阶段的结果写回到指定的寄存器或内存单元中。</li>
<li>例如，在执行完算术运算指令后，将结果写回到目标寄存器；或者在完成访存操作后，更新内存单元中的数据。</li>
</ul>
</li>
<li><strong>指令流水参数计算</strong><ul>
<li><strong>指令流水线概念</strong>：指令流水线是一种将指令周期划分为多个阶段，让多条指令在不同阶段同时执行的技术，以提高CPU的吞吐率。</li>
<li><strong>流水线的阶段划分</strong>：</li>
<li>假设一个简单的指令流水线分为取指（F）、译码（D）、执行（E）、访存（M）和写回（W）5个阶段。</li>
<li>每个阶段所需时间可能不同，设取指阶段需要时间$t_F$，译码阶段需要时间$t_D$，执行阶段需要时间$t_E$，访存阶段需要时间$t_M$，写回阶段需要时间$t_W$。</li>
<li><strong>流水线参数计算</strong>：</li>
<li><strong>吞吐率（TP）</strong>：</li>
<li>定义：单位时间内完成的指令数。</li>
<li>计算：假设流水线的时钟周期$T &#x3D; max(t_F,t_D,t_E,t_M,t_W)$，则吞吐率$TP&#x3D;\frac{1}{T}$。例如，如果$t_F &#x3D; 2ns$，$t_D &#x3D; 1ns$，$t_E &#x3D; 3ns$，$t_M &#x3D; 2ns$，$t_W &#x3D; 1ns$，则$T &#x3D; 3ns$，$TP&#x3D;\frac{1}{3ns}\approx333.33$百万条指令&#x2F;秒。</li>
<li><strong>加速比（S）</strong>：</li>
<li>定义：不使用流水线和使用流水线两种情况下完成相同任务所需时间之比。</li>
<li>计算：设$n$为任务中的指令数，$T_0$为不采用流水线时一条指令的执行时间（假设$T_0&#x3D;t_F + t_D + t_E + t_M + t_W$），$T_k$为采用流水线后的总执行时间。在理想情况下（没有流水线冒险等情况），$T_k&#x3D;(k + n - 1)T$（$k$是流水线的级数，这里$k &#x3D; 5$），则加速比$S&#x3D;\frac{nT_0}{(k + n - 1)T}$。例如，当$n &#x3D; 10$，$T_0 &#x3D; 9ns$（假设前面各阶段时间之和），$T &#x3D; 3ns$，$k &#x3D; 5$时，$T_k&#x3D;(5 + 10 - 1)\times3ns &#x3D; 42ns$，$S&#x3D;\frac{10\times9ns}{42ns}\approx2.14$。</li>
<li><strong>效率（E）</strong>：</li>
<li>定义：流水线的设备利用率，即流水线各阶段的平均利用率。</li>
<li>计算：$E&#x3D;\frac{S}{k}$。在上面的例子中，$E&#x3D;\frac{2.14}{5}&#x3D;0.428$。这表示流水线各阶段平均有42.8%的时间在工作。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>微操作的安排</p>
<ul>
<li><ol>
<li><strong>微操作的基本概念</strong><ul>
<li>微操作是计算机中最基本的、不可再细分的操作。它是在一个时钟周期内，由控制部件发出的控制信号控制完成的操作，例如寄存器之间的数据传送、算术逻辑单元（ALU）的运算操作等。这些微操作的有序组合实现了指令的功能。</li>
</ul>
</li>
<li><strong>微操作安排的原则</strong><ul>
<li><strong>按指令功能划分阶段</strong></li>
<li>一条指令的执行过程可以划分为取指、译码、执行、访存和写回等阶段，微操作的安排要与这些阶段相对应。</li>
<li>在取指阶段，主要的微操作包括将程序计数器（PC）的内容送到存储器地址寄存器（MAR），然后根据MAR中的地址从存储器中读取指令并存入存储器数据寄存器（MDR），最后将MDR中的指令送入指令寄存器（IR），同时PC自动增量。例如，对于一个简单的计算机模型，其微操作序列可能是：(PC→MAR)，(MEM(MAR)→MDR)，(MDR→IR)，(PC + 1→PC)。</li>
<li><strong>考虑数据通路和时序</strong></li>
<li>微操作的安排要与计算机的数据通路相匹配。数据通路是指数据在计算机各部件之间流动的路径，包括寄存器、ALU、存储器等部件之间的连接线路。</li>
<li>例如，如果要实现两个寄存器的数据相加并将结果存入另一个寄存器的操作，需要考虑数据从寄存器到ALU的传输路径，以及ALU结果到目标寄存器的路径。同时，要根据时钟信号的节拍来安排微操作的顺序。假设一个时钟周期分为四个节拍(T_1)、(T_2)、(T_3)、(T_4)，在(T_1)节拍可能将一个操作数从寄存器送到ALU，在(T_2)节拍将另一个操作数送到ALU，在(T_3)节拍ALU进行加法运算，在(T_4)节拍将结果存入目标寄存器。</li>
<li><strong>避免冲突和冒险</strong></li>
<li>结构冒险：当硬件资源不能同时满足多个微操作的请求时会发生结构冒险。例如，存储器在一个时钟周期内不能同时进行读操作和写操作。为避免这种情况，可以采用分时复用的方法，或者增加硬件资源（如增加存储体）。</li>
<li>数据冒险：当一条指令需要用到前面指令还未产生的数据时会发生数据冒险。例如，指令(I_2)需要用到指令(I_1)的运算结果，但是(I_1)还没有完成写回操作。解决方法包括数据转发（将正在执行阶段产生的数据直接转发给需要的指令）和插入气泡（暂停流水线，等待数据准备好）。</li>
<li>控制冒险：主要是由于分支指令或跳转指令引起的。例如，当遇到条件分支指令时，流水线可能已经预取了分支指令后面的指令，但实际上应该根据分支条件决定是否执行这些指令。可以采用分支预测技术（如静态预测或动态预测）来减少控制冒险对流水线性能的影响。</li>
</ul>
</li>
<li><strong>不同类型指令的微操作安排示例</strong><ul>
<li><strong>数据传送指令（如MOV R1, R2）</strong></li>
<li>取指阶段同上述一般取指阶段的微操作。</li>
<li>译码阶段：识别指令为数据传送指令，确定源寄存器（R2）和目标寄存器（R1）。</li>
<li>执行阶段：将源寄存器（R2）的内容传送到数据总线上，即(R2→BUS)，然后将数据总线上的数据存入目标寄存器（R1），即(BUS→R1)。</li>
<li><strong>算术运算指令（如ADD R3, R4）</strong></li>
<li>取指和译码阶段类似前面。</li>
<li>执行阶段：将操作数分别从寄存器（R3和R4）送到ALU，即(R3→ALU)，(R4→ALU)，ALU进行加法运算，产生结果，然后将结果送到数据总线，即(ALU→BUS)，最后将结果存入目标寄存器（假设结果存回R3），即(BUS→R3)。</li>
<li><strong>分支指令（如JNZ LABEL）</strong></li>
<li>取指和译码阶段正常进行。</li>
<li>执行阶段：根据条件码（如零标志位ZF）判断是否跳转。如果(ZF &#x3D; 0)（非零），计算跳转目标地址（假设目标地址是相对偏移量与PC相加），即(PC + offset→PC)；如果(ZF &#x3D; 1)（为零），则顺序执行下一条指令，PC正常增量。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>

                    
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                                   title="正则表达式"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">正则表达式</span>
                                        <span class="post-nav-item">Prev posts</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/any%E5%92%8Cunknown/"
                                   title="any和unknown"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">any和unknown</span>
                                        <span class="post-nav-item">Next posts</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
        &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2025
        
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Keep Team</a>
        
    </div>

    <div class="theme-info info-item">
        Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
    </div>

    

    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    

    <!-- tablet toc -->
    
</main>





<!-- common js -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local search -->


<!-- lazyload -->


<div class="">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
